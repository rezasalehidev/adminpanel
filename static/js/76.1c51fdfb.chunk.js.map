{"version":3,"sources":["views/Order/Status.js","views/Order/order.module.css"],"names":["Status","useState","file","setFile","image","setImage","title","setTitle","defaultCheck","setDefaultCheck","loading","setLoading","orderstatus","setOrderstatus","status","setStatus","useEffect","axios","url","method","data","query","variables","page","limit","then","res","getAllOrderStatus","map","item","flag","catch","err","console","log","className","xs","row","type","placeholder","onChange","e","target","value","htmlFor","id","name","style","marginRight","Classes","addFile","label","multiple","files","privew","URL","createObjectURL","length","BOXimage","src","alt","onClick","default","formD","FormData","append","JSON","stringify","0","errors","message","toast","error","addorderstatus","success","size","striped","responsive","hober","index","key","copyOrderStatus","findIndex","_id","EditName","WraperImage","process","checked","EditCehck","handleEdit","copyORderStatus","orderId","updateOrderStatus","submitMain","module","exports"],"mappings":"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","file":"static/js/76.1c51fdfb.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Card,\r\n  CardBody,\r\n  CardHeader,\r\n  Col,\r\n  Row,\r\n  CardFooter,\r\n  Button,\r\n  Input,\r\n  FormGroup,\r\n  Label,\r\n  Table,\r\n} from \"reactstrap\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { toast, ToastContainer } from \"react-toastify\";\r\nimport axios from \"axios\";\r\nimport Classes from \"./order.module.css\";\r\nimport Spinner from \"reactstrap/lib/Spinner\";\r\n\r\nconst Status = () => {\r\n  const [file, setFile] = useState(\"\");\r\n  const [image, setImage] = useState(\"\");\r\n  const [title, setTitle] = useState(\"\");\r\n  const [defaultCheck, setDefaultCheck] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [orderstatus, setOrderstatus] = useState([]);\r\n  const [status, setStatus] = useState(false);\r\n\r\n  const changeInputFile = (e) => {\r\n    setFile(e.target.files[0]);\r\n    const privew = URL.createObjectURL(e.target.files[0]);\r\n    setImage(privew);\r\n  };\r\n\r\n  const SubmitOrderStatus = (e) => {\r\n    setLoading(true);\r\n    let data = {\r\n      query: `\r\n         mutation addOrderStatus($name:String!,$image:Upload!,$default:Boolean){\r\n              addorderstatus(name:$name,image:$image,default:$default){\r\n                status,\r\n                message\r\n              }\r\n         }\r\n        `,\r\n      variables: {\r\n        name: title,\r\n        image: null,\r\n        default: defaultCheck,\r\n      },\r\n    };\r\n    let map = {\r\n      0: [\"variables.image\"],\r\n    };\r\n    const formD = new FormData();\r\n    formD.append(\"operations\", JSON.stringify(data));\r\n    formD.append(\"map\", JSON.stringify(map));\r\n    formD.append(0, file, file.name);\r\n\r\n    axios({\r\n      url: \"/\",\r\n      method: \"post\",\r\n      data: formD,\r\n    })\r\n      .then((res) => {\r\n        setLoading(false);\r\n        if (res.data.errors) {\r\n          const { message } = res.data.errors[0].data[0];\r\n          toast.error(message);\r\n        } else {\r\n          const { message } = res.data.data.addorderstatus;\r\n          toast.success(message);\r\n          setStatus(!status);\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  const handleDefault = (e) => {\r\n    setDefaultCheck(!defaultCheck);\r\n  };\r\n\r\n  useEffect(() => {\r\n    axios({\r\n      url: \"/\",\r\n      method: \"post\",\r\n      data: {\r\n        query: `\r\n        query getAllOrderStatus($page:Int,$limit:Int){\r\n          getAllOrderStatus(page:$page,limit:$limit){\r\n            _id,\r\n            name,\r\n            image,\r\n            default\r\n          }\r\n        }\r\n        `,\r\n        variables: {\r\n          page: 1,\r\n          limit: 30,\r\n        },\r\n      },\r\n    })\r\n      .then((res) => {\r\n        const { getAllOrderStatus } = res.data.data;\r\n        getAllOrderStatus.map((item) => (item.flag = false));\r\n        setOrderstatus(getAllOrderStatus);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }, [status]);\r\n\r\n  const handleEdit = (e, id) => {\r\n    const copyOrderStatus = [...orderstatus];\r\n    const index = copyOrderStatus.findIndex((item) => item._id === id);\r\n    copyOrderStatus[index].flag = true;\r\n    setOrderstatus(copyOrderStatus);\r\n  };\r\n\r\n  const EditName = (e, id) => {\r\n    const copyOrderStatus = [...orderstatus];\r\n    const index = copyOrderStatus.findIndex((item) => item._id === id);\r\n    copyOrderStatus[index].name = e.target.value;\r\n    setOrderstatus(copyOrderStatus);\r\n  };\r\n  const EditCehck = (e, id) => {\r\n    const copyOrderStatus = [...orderstatus];\r\n    const index = copyOrderStatus.findIndex((item) => item._id === id);\r\n    copyOrderStatus[index].default = !copyOrderStatus[index].default;\r\n    setOrderstatus(copyOrderStatus);\r\n  };\r\n\r\n  const submitMain = (id) => {\r\n    const copyORderStatus = [...orderstatus];\r\n    const index = copyORderStatus.findIndex((item) => item._id === id);\r\n    setLoading(true);\r\n    axios({\r\n      url: \"/\",\r\n      method: \"post\",\r\n      data: {\r\n        query: `\r\n        mutation updateOrderStatus($orderId:ID!,$name:String!,$default:Boolean!){\r\n          updateOrderStatus(orderId:$orderId,name:$name,default:$default){\r\n            status,\r\n            message\r\n          }}\r\n        `,\r\n        variables: {\r\n          orderId: id,\r\n          name: copyORderStatus[index].name,\r\n          default: copyORderStatus[index].default,\r\n        },\r\n      },\r\n    })\r\n      .then((res) => {\r\n        setLoading(false);\r\n        if (res.data.errors) {\r\n          const { message } = res.data.errors[0].data[0];\r\n          toast.error(message);\r\n        } else {\r\n          const { message } = res.data.data.updateOrderStatus;\r\n          toast.success(message);\r\n          setStatus(!status);\r\n          copyORderStatus[index].flag = false;\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  return (\r\n    <div className=\"animated fadeIn\">\r\n      <ToastContainer />\r\n      <Row>\r\n        <Col xs=\"12\">\r\n          <Card>\r\n            <CardHeader>اضافه کردن وضعیت سفارش</CardHeader>\r\n            <CardBody>\r\n              <FormGroup row>\r\n                <Col xs=\"4\">\r\n                  <Label>عنوان</Label>\r\n                  <Input\r\n                    type=\"text\"\r\n                    placeholder=\"عنوان وضعیت سفارش را وارد نمائید\"\r\n                    onChange={(e) => setTitle(e.target.value)}\r\n                  />\r\n                </Col>\r\n                <Col xs=\"4\" className=\"mt-3\">\r\n                  <Label htmlFor=\"check\">تعیین به عنوان حالت پیش فرض</Label>\r\n                  <Input\r\n                    id=\"check\"\r\n                    name=\"check\"\r\n                    type=\"checkbox\"\r\n                    onChange={handleDefault}\r\n                    style={{ marginRight: \"10px\" }}\r\n                  />\r\n                </Col>\r\n                <Col xs=\"4\">\r\n                  <div className={Classes.addFile}>\r\n                    <div className={Classes.label}>\r\n                      <label htmlFor=\"add_media\">گزینش تصویر</label>\r\n                    </div>\r\n                    <input\r\n                      type=\"file\"\r\n                      id=\"add_media\"\r\n                      multiple\r\n                      name=\"add_media\"\r\n                      onChange={changeInputFile}\r\n                    />\r\n                  </div>\r\n                </Col>\r\n                {image.length > 0 ? (\r\n                  <Col xs=\"4\">\r\n                    <div className={Classes.BOXimage}>\r\n                      <img src={image} alt={image} />\r\n                    </div>\r\n                  </Col>\r\n                ) : null}\r\n              </FormGroup>\r\n            </CardBody>\r\n            <CardFooter>\r\n              <Button className=\"btn-success\" onClick={SubmitOrderStatus}>\r\n                ثبت وضعیت سفارش\r\n              </Button>\r\n            </CardFooter>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      <Row>\r\n        <Col>\r\n          <Card>\r\n            <CardHeader>\r\n              <i className=\"fa fa-align-justify\"></i>همه برند ها\r\n            </CardHeader>\r\n            <CardBody>\r\n              {loading ? (\r\n                <center>\r\n                  <Spinner size=\"sm\" />{\" \"}\r\n                </center>\r\n              ) : (\r\n                <Table striped responsive size=\"sm\" hober>\r\n                  <thead>\r\n                    <tr>\r\n                      <th>عنوان</th>\r\n                      <th>عکس</th>\r\n                      <th>وضعیت</th>\r\n                      <th>عملیات</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {orderstatus.map((item, index) => (\r\n                      <tr key={index}>\r\n                        <td>\r\n                          {item.flag ? (\r\n                            <Input\r\n                              type=\"text\"\r\n                              value={item.name}\r\n                              onChange={(e) => EditName(e, item._id)}\r\n                            />\r\n                          ) : (\r\n                            item.name\r\n                          )}\r\n                        </td>\r\n                        <td>\r\n                          <div className={Classes.WraperImage}>\r\n                            <img\r\n                              src={`${process.env.REACT_APP_BASE_URL}${item.image}`}\r\n                              alt={item.image}\r\n                            />\r\n                          </div>\r\n                        </td>\r\n                        <td>\r\n                          {item.flag ? (\r\n                            <Input\r\n                              type=\"checkbox\"\r\n                              checked={item.default}\r\n                              onChange={(e) => EditCehck(e, item._id)}\r\n                            />\r\n                          ) : item.default ? (\r\n                            \"پیش فرض\"\r\n                          ) : (\r\n                            \"عادی\"\r\n                          )}\r\n                        </td>\r\n                        <td>\r\n                          <Button\r\n                            className=\"btn-primary\"\r\n                            onClick={(e) => handleEdit(e, item._id)}\r\n                          >\r\n                            {item.flag ? (\r\n                              loading ? (\r\n                                <center>\r\n                                  <Spinner size=\"sm\" />\r\n                                </center>\r\n                              ) : (\r\n                                <i\r\n                                  className=\"fa fa-rocket fa-lg\"\r\n                                  onClick={() => submitMain(item._id)}\r\n                                ></i>\r\n                              )\r\n                            ) : (\r\n                              \"ویرایش\"\r\n                            )}\r\n                          </Button>\r\n                          <Button className=\"btn-danger\">حذف</Button>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </Table>\r\n              )}\r\n            </CardBody>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Status;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"BOXimage\":\"order_BOXimage__1NEWP\",\"addFile\":\"order_addFile__2epp0\",\"label\":\"order_label__2Y9LP\",\"inputFile\":\"order_inputFile__3wse7\",\"WraperImage\":\"order_WraperImage__n7S-P\",\"txt\":\"order_txt__J4tI6\",\"cardBoDy\":\"order_cardBoDy__3h500\",\"BoxWraper\":\"order_BoxWraper__3_3zq\",\"mainWraper\":\"order_mainWraper__3Jt85\",\"isActive\":\"order_isActive__w8rxY\"};"],"sourceRoot":""}